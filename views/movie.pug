extends layout.pug 

block head
  link(rel='stylesheet', href='./public/assets/css/movie.css', type='text/css')
  script(src='https://code.jquery.com/jquery-3.5.1.min.js', type="text/javascript")
  script(src='https://unpkg.com/axios/dist/axios.min.js')

block content 
  body
  //- link(rel='stylesheet', href='./public/css/index.css')
  div.detail test
    h1#title
    p#original_title
    div#media
      img#poster
    
    //- h6(style='display: flex; justify-content: center;') #{data[0].release_date}
    div#media-middle
      h6#overview
      iframe#trailer( width='540' height='290', frameborder = '0', allowfullscreen = '')

  script.

    let movieInfo;
    const id = document.URL.split("=")[1].split("&")[0];
    const locale = document.URL.split("=")[2];

    window.addEventListener('load', async function (event) {
      try{
        movieInfo = await axios.get(`/api/1.0/movie/info?id=${id}&locale=${locale}`)

        showMovieInfo(movieInfo)
      }catch(err){
        console.log(err)
      }

    })
    

     function showMovieInfo(movieInfo){
      let info = movieInfo.data.data
      console.log('info',info)
    }
    