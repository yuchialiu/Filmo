extends layout.pug 

block head
  link(rel='stylesheet', href='/public/assets/css/profile.css')
  link(rel='stylesheet', href='/public/assets/css/index.css')
  script(src='https://code.jquery.com/jquery-3.5.1.min.js', type="text/javascript")
  script(src='https://unpkg.com/axios/dist/axios.min.js')

block content 
  body
  .tab
    a(href=`/profile?locale=${data.locale}`)
      button.tablinks My Account
    a(href=`/profile/review?locale=${data.locale}`)  
      button.tablinks My Reviews
    a(href=`/store/review?locale=${data.locale}`)
      button.tablinks Saved Reviews
    a(href=`/store/movie?locale=${data.locale}`)
      button.tablinks Saved Movies

  div.movie
    - for (const i in data)
      a.list_link(href=`/movie?id=${data[i].id}&locale=${data.locale}`)
        img.list_img(src=`${data[i].poster}`)
        p.list_title #{data[i].title}

  script.

    //- let token = localStorage.getItem('Authorization');
    
    //- window.addEventListener('load', async function (event) {
    //-   try {        
    //-   if (!token) {
    //-     alert("please sign in or sign up first");
    //-     console.log("no token, please sign in or sign up first");
    //-     window.location.href = "login";
    //-     return;
    //-   }
    //-   await auth_member();
    //-   //- showReviewByAccount(auth_result);
    //- } catch(err) {
    //-   console.log(err);
    //- }
    //- });

    //- //authorize member
    //- let auth_result;
    //- const locale = document.URL.split("=")[1];


    //-   async function auth_member() {
    //-   try {
    //-     auth_result = await axios({
    //-       method: 'GET',
    //-       url: `/api/1.0/user/review?locale=${locale}`,
    //-       responseType: 'json',
    //-       headers: {
    //-         Authorization: `${localStorage.getItem('Authorization')}`,
    //-       },
    //-       });

    //-     return auth_result;
    //-   } catch(err) { 
    //-     console.log(err);
    //-   }
    //- }

    //- //- function showReviewByAccount(auth_result){
    //- //-   let info = auth_result.data.data;
    //- //-   console.log(info)

    //- //-   for (let i in info){      }
    //- //- }