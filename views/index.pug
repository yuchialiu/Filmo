extends layout.pug 

block head
  link(rel='stylesheet', href='/public/assets/css/index.css')
  //- link(rel='stylesheet', type="text/css", href='/public/assets/css/jquery.vm-carousel.css' )

block content 
  div.content
    div.banner
      h1.title 
      - for (i in data)
        - if (data[i].movie_id === 5)
          a.banner_link(href=`/movie?id=${data[i].movie_id}&locale=${locale}`)

            div.banner_media
              img.banner_img(src=`${data[i].banner}`)
              div.banner_text_background
              div.banner_text
                h1.banner_title #{data[i].title}
                p.text-center.mt-5
                  a(href="#headerPopup" id="headerVideoLink" target="_blank" class="btn btn-outline-danger popup-modal") #{lang.movie.trailer}
          //- div(id="headerPopup" class="mfp-hide embed-responsive embed-responsive-21by9")
          //-   iframe.embed-responsive-item(width='854' height='480' src=`${data[5].trailer_embed}` frameborder='0' allow='autoplay; encrypted-media' allowfullscreen='')
      
    div.blocks
      div.container
        div.second_title
          h1.second_title_line_1#trending #{lang.index.trending}
          h1.second_title_line_2 #{lang.index.now}
        div.list_box
          //- ul.movie_list.vmcarousel-normal
          ul.movie_list(class="owl-features owl-carousel owl-loaded owl-drag")
            - for (let i = 5; i < 35; i++)
              li.list_div
                a.list_link(href=`/movie?id=${data[i].movie_id}&locale=${locale}`)
                  img.list_img(src=`${data[i].poster}`)
                  p.list_title #{data[i].title}

        div.second_title
          h1.second_title_line_1#new #{lang.index.new}
          h1.second_title_line_2 #{lang.index.releases}
        div.list_box
          //- ul.movie_list.vmcarousel-normal
          ul.movie_list(class="owl-features owl-carousel owl-loaded owl-drag")
            - for (let i = 50; i < 80; i++)
              li.list_div
                a.list_link(href=`/movie?id=${data[i].movie_id}&locale=${locale}`)
                  img.list_img(src=`${data[i].poster}`)
                  p.list_title #{data[i].title}


        //- div.second_title
        //-   h1.second_title_line_1#new Test     
        //-   h1.second_title_line_2 Carousel 
        //- div.list_box
        //-   ul.movie_list(class="owl-features owl-carousel owl-loaded owl-drag")
        //-     - for (let i = 50; i < 80; i++)
        //-       li.list_div
        //-         a.list_link(href=`/movie?id=${data[i].movie_id}&locale=${locale}`)
        //-           img.list_img(src=`${data[i].poster}`)
        //-           p.list_title #{data[i].title}
            
  script(src='/public/assets/js/owl.carousel.js')
  script(src='/public/assets/js/owl.autoplay.js')
  script(src='/public/assets/js/owl.navigation.js')
  script(type="text/javascript").
    //- $( document ).ready(function() {
    //-   $('#headerVideoLink').magnificPopup({
    //-   type:'inline',
    //-   midClick: true // Allow opening popup on middle mouse click. Always set it to true if you don't provide alternative source in href.
    //-   });
    //- });
    

    //- $('.vmcarousel-normal').vmcarousel({

    //-   // delay in ms
    //-   delay: 4000,

    //-   // transition speed
    //-   speed: 500,

    //-   // enabe autoplay
    //-   autoplay: false,

    //-   // 0 for auto calc
    //-   items_to_show: 3, 

    //-   // min number of items
    //-   min_items_to_show: 3,

    //-   // items to slide at a time
    //-   items_to_slide: 0,
    //-   dont_cut: true,

    //-   // center the current image
    //-   centered: false,

    //-   // start item
    //-   start_item: 0,
    //-   start_item_centered: false,

    //-   // infinite loop
    //-   infinite: true,

    //-   // callback
    //-   changed_slide: $.noop()

    //- });
    //- $(document).ready(function(){
    $(".owl-carousel").owlCarousel({
      items: 3,
      loop: true, // 循環播放
      margin: 10, // 外距 10px
      nav: true, // 顯示箭頭
      autoplay: true,

      responsive: {
        0: {
          items: 3 // 螢幕大小為 0~600 顯示 1 個項目
        },
        600: {
          items: 3 // 螢幕大小為 600~1000 顯示 3 個項目
        },
        1000: {
          items: 3 // 螢幕大小為 1000 以上 顯示 5 個項目
        }
      } 
      
    });
      
    //- })   