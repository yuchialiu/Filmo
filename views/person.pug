extends layout.pug 

block head
  link(rel='stylesheet', href='/public/assets/css/person.css', type='text/css')
  script(src='https://code.jquery.com/jquery-3.5.1.min.js', type="text/javascript")
  script(src='https://unpkg.com/axios/dist/axios.min.js')

block content 
  body

  div.detail
    h1#name #{data.name}
    img#image(src=`${data.image}`)
    p#birthday Birthday #{data.birthday}
    p#deathday #{data.deathday}
    p#place #{data.place_of_birth}
    p#biography #{data.biography}

    div#other_movie Also Participating in
      br
      div.other_cast_div
        - if (data.other_cast_movie.length === 0 )
          div
        - else 
          - for (const i in data.other_cast_movie)
            a(href=`/movie?id=${data.other_cast_movie[i].movie_id}&locale=${data.locale}`) 
              img.movie_img(src=`${data.other_cast_movie[i].poster}`, alt="")
              p.movie_title #{data.other_cast_movie[i].title}
              p.movie_character #{data.other_cast_movie[i].character}

      div.other_crew_div
        - if (data.other_crew_movie.length === 0 )
          div
        - else 
          - for (const i in data.other_crew_movie)
            a(href=`/movie?id=${data.other_crew_movie[i].movie_id}&locale=${data.locale}`) 
              img.movie_img(src=`${data.other_crew_movie[i].poster}`, alt="")
              p.movie_title #{data.other_crew_movie[i].title}
              p.movie_job #{data.other_crew_movie[i].job}
        


  //- script.

  //-   let personInfo;
  //-   const id = document.URL.split("=")[1].split("&")[0];
  //-   const locale = document.URL.split("=")[2];

  //-   window.addEventListener('load', async function (event) {
  //-     try{
  //-       personInfo = await axios.get(`/api/1.0/movie/person/detail?person_id=${id}&locale=${locale}`)

  //-       showPersonInfo(personInfo)
  //-     }catch(err){
  //-       console.log(err)
  //-     }

  //-   })

  //-   function showPersonInfo(personInfo){
  //-     let info = personInfo.data.data 
  //-     console.log('info',info)
  //-     $('#name').html(info.name)
  //-     $('#birthday').html((info.birthday).slice(0,10))
  //-     $('#deathday').html((info.deathday))
  //-     $('#place').html(info.place_of_birth)
  //-     $('#biography').html(info.biography)
  //-     $('#image').attr('src', info.image)

  //-     for (let i in info.other_cast_movie){
  //-       const d = $('<div></div>').addClass('other_cast_div')
  //-       const a = $('<a></a>').attr('href', `/movie?id=${info.other_cast_movie[i].movie_id}&locale=${locale}`)
  //-       const img = $('<img>').addClass('movie_img').attr('src', info.other_cast_movie[i].poster)
  //-       const pTitle = $('<p></p>').addClass('movie_title').html(info.other_cast_movie[i].title)
  //-       const p = $('<p></p>').addClass('movie_character').html(info.other_cast_movie[i].character)
      
  //-       let div = a
  //-       div = div.append(img)
  //-       div = div.append(pTitle)
  //-       div = div.append(p)

  //-       $('#other_movie').append(d)
  //-       $('#other_movie').append(div)
      
  //-     }

  //-     for (let i in info.other_crew_movie){
  //-       const d = $('<div></div>').addClass('other_crew_div')
  //-       const a = $('<a></a>').attr('href', `/movie?id=${info.other_crew_movie[i].movie_id}&locale=${locale}`)
  //-       const img = $('<img>').addClass('movie_img').attr('src', info.other_crew_movie[i].poster)
  //-       const pTitle = $('<p></p>').addClass('movie_title').html(info.other_crew_movie[i].title)
  //-       const p = $('<p></p>').addClass('movie_job').html(info.other_crew_movie[i].job)

  //-       let div = a
  //-       div = div.append(img)
  //-       div = div.append(pTitle)
  //-       div = div.append(p)

  //-       $('#other_movie').append(d)
  //-       $('#other_movie').append(div)
  //-     }
  //-   }